
var lobbyState = {
    users: {
        leon: 4,
        ben: 3,
        bethany: 9
    },
    challenge_to: ["damien", false],
    challenges_from: {leon: 4}
};

// Update the list of users that can be challenged
var updateUsers = function(lobbyState) {
    console.log(lobbyState);
    var users = lobbyState.users;
    var $form = $('<form>');
    $form.append("Online players <br>")
    for (user in users) {
        // users is a hash username -> ranking
        var ranking = users[user];
        var $row = $('<input type="radio" name="user" value=' + user + '>')
        $form.append($row).append(user + ': ' + ranking).append($('<br>'));
    };
    $form.append('<input type="submit" value="Challenge" style="font-size: 18px;">')
    $('#formDiv').append($form);
};

var updateChallenges = function(lobbyState) {
    var users = lobbyState.challenges_from;
    var $form = $('<form>');
    $form.append("Challenges Received <br>")
    for (user in users) {
        // users is a hash username -> ranking
        var ranking = users[user];
        var $row = $('<input type="radio" name="challenger" value=' + user + '>')
        $form.append($row).append(user + ': ' + ranking).append($('<br>'));
    };
    $form.append('<input type="submit" value="Accept" style="font-size: 18px;">')
    $('#challengesDiv').append($form);
};

var updateCurrentChallenge = function(lobbyState) {
    var challenge = lobbyState.challenge_to[0];
    var $form = $('<form>');
    $form.append("Challenged:<br>" + challenge+  "<br>")
    $form.append('<input type="submit" value="Withdraw" style="font-size: 18px;">')
    $('#currentChallengeDiv').append($form);
};

var ready = function() {
    updateUsers(lobbyState);
    updateChallenges(lobbyState)
    updateCurrentChallenge(lobbyState)
    console.log('done updating');
};

$(ready);